// Inicializa o mapa em um elemento div com o ID "map"
var map = L.map('map');

// Adiciona um camada do mapa de fundo
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  attribution: '&copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors',
  maxZoom: 18,
}).addTo(map);

// Define a visualização inicial do mapa baseado nos marcadores
var bounds = L.latLngBounds([-3.7319, -38.5267], [-4.1208, -38.4709]);
map.fitBounds(bounds);

// marker1
var marker1 = L.marker([-3.795764, -38.534455]).addTo(map);

var popupContent1 = '<div class="popup-content">' +
  '<img src="\FORTALEZA.png">' +
  '<p class="popup-text"><strong>SUB-BACIAS CE-07_08_09_ETE COCÓ</strong><br><br>CONTRATO: 048/2022<br>AVANÇO FÍSICO: 3,93%<br>AVANÇO FINANCEIRO: 9,14%<br><br>CLIQUE PARA MAIS INFORMAÇÕES...</p>' +
  '</div>';
  

marker1.bindPopup(popupContent1);

// Adicione a classe "marker-neon" ao elemento do marcador quando o mouse passar por cima
marker1.on('mouseover', function(e) {
  this.getElement().classList.add('marker-neon');
  this.openPopup();
});

// Remova a classe "marker-neon" do elemento do marcador quando o mouse sair de cima do marcador
marker1.on('mouseout', function(e) {
  this.getElement().classList.remove('marker-neon');
  this.closePopup();
});
marker1.on('click', function(e) {
  window.open('https://concrematcorp.sharepoint.com/sites/CAGECE/SitePages/CTR048-2022.aspx', '_blank');
});




// marker2
var marker2 = L.marker([-4.088785, -38.500393]).addTo(map);
marker2.bindPopup('<div class="popup-content"><img src="\HORIZONTE.png"><p class="popup-text"><strong>SAAI HORIZONTE, PACAJUS E CHOROZINHO </strong> <br><br> CONTRATO: 039/2022 <br> AVANÇO FÍSICO: 7,64% <br> AVANÇO FINANCEIRO: 18,56% <br><BR>CLIQUE PARA SABER MAIS...</p></div>');

marker2.on('mouseover', function(e) {
  this.getElement().classList.add('marker-neon');
    this.openPopup();
});
marker2.on('mouseout', function(e) {
  this.getElement().classList.remove('marker-neon');
    this.closePopup();
});

marker2.on('click', function(e) {
  window.open('https://concrematcorp.sharepoint.com/sites/CAGECE/SitePages/CTR039-2022.aspx', '_blank');
});

// botão de foco 1
var focusButton = L.control({position: 'topright'});
focusButton.onAdd = function(map) {
  var button = L.DomUtil.create('button', 'focus-button');
  button.innerHTML = 'SUB-BACIAS CE-07_08_09_ETE COCÓ';
  L.DomEvent.on(button, 'click', function() {
    map.flyTo([-3.795764, -38.534455], 17);
  });
  return button;
}
focusButton.addTo(map);

// botão de foco 2
var focusButton = L.control({position: 'topright'});
focusButton.onAdd = function(map) {
  var button = L.DomUtil.create('button', 'focus-button');
  button.innerHTML = 'SAAI HORIZONTE, PACAJUS E CHOROZINHO';
  L.DomEvent.on(button, 'click', function() {
    map.flyTo([-4.088785, -38.500393], 17);
  });
  return button;
}
focusButton.addTo(map);

// botão de foco 3
var focusButton = L.control({position: 'topright'});
focusButton.onAdd = function(map) {
  var button = L.DomUtil.create('button', 'focus-button');
  button.innerHTML = 'VISÃO GERAL';
  L.DomEvent.on(button, 'click', function() {
    var bounds = L.latLngBounds([[-3.795764, -38.534455], [-4.088785, -38.500393]]);
    map.fitBounds(bounds);
  });
  return button;
}
focusButton.addTo(map);

//polígono
var fortalezaCoords = [
  [-3.79259, -38.51928],
  [-3.79183, -38.52148],
  [-3.79065, -38.52344],
  [-3.79085, -38.52558],
  [-3.79249, -38.52662],
  [-3.79360, -38.52830],
  [-3.79336, -38.52913],
  [-3.79425, -38.52937],
  [-3.79449, -38.52975],
  [-3.79463, -38.53032],
  [-3.79431, -38.53070],
  [-3.79281, -38.53026],
  [-3.79203, -38.53144],
  [-3.79229, -38.53160],
  [-3.79310, -38.53232],
  [-3.79345, -38.53454],
  [-3.79284, -38.53518],
  [-3.79243, -38.53556],
  [-3.79215, -38.53594],
  [-3.79210, -38.53671],
  [-3.79155, -38.53707],
  [-3.79094, -38.53866],
  [-3.79113, -38.53896],
  [-3.79074, -38.53929],
  [-3.79099, -38.53972],
  [-3.79074, -38.54048],
  [-3.79099, -38.54055],
  [-3.79117, -38.54107],
  [-3.79056, -38.54125],
  [-3.79025, -38.54207],
  [-3.79044, -38.54208],
  [-3.79059, -38.54251],
  [-3.79023, -38.54276],
  [-3.78983, -38.54263],
  [-3.78962, -38.54290],
  [-3.78934, -38.54318],
  [-3.78886, -38.54311],
  [-3.78842, -38.54444],
  [-3.78745, -38.54487],
  [-3.78731, -38.54526],
  [-3.78783, -38.54613],
  [-3.78772, -38.54649],
  [-3.78801, -38.54691],
  [-3.78793, -38.54726],
  [-3.78756, -38.54790],
  [-3.78520, -38.55241],
  [-3.78657, -38.55319],
  [-3.78665, -38.55352],
  [-3.78697, -38.55346],
  [-3.78727, -38.55362],
  [-3.78737, -38.55401],
  [-3.78712, -38.55440],
  [-3.78858, -38.55521],
  [-3.78878, -38.55969],
  [-3.79116, -38.56067],
  [-3.79235, -38.56104],
  [-3.79286, -38.56002],
  [-3.79397, -38.56055],
  [-3.79369, -38.56146],
  [-3.79666, -38.56238],
  [-3.79719, -38.56326],
  [-3.79670, -38.56488],
  [-3.79635, -38.56503],
  [-3.79648, -38.56555],
  [-3.79680, -38.56566],
  [-3.79730, -38.56693],
  [-3.79677, -38.56859],
  [-3.79715, -38.56842],
  [-3.79785, -38.56862],
  [-3.79803, -38.56943],
  [-3.79711, -38.56989],
  [-3.79709, -38.56990],
  [-3.79740, -38.57000],
  [-3.79754, -38.57041],
  [-3.79848, -38.57071],
  [-3.80340, -38.57222],
  [-3.80515, -38.57278],
  [-3.80644, -38.57320],
  [-3.80669, -38.57326],
  [-3.80725, -38.57346],
  [-3.80854, -38.57387],
  [-3.81070, -38.57458],
  [-3.81285, -38.57526],
  [-3.81354, -38.57326],
  [-3.81488, -38.56942],
  [-3.81553, -38.56897],
  [-3.81571, -38.56883],
  [-3.81630, -38.56832],
  [-3.81667, -38.56790],
  [-3.81673, -38.56767],
  [-3.81691, -38.56731],
  [-3.81900, -38.56807],
  [-3.82033, -38.56603],
  [-3.82073, -38.56479],
  [-3.82099, -38.56418],
  [-3.82056, -38.56368],
  [-3.82091, -38.56321],
  [-3.82106, -38.56129],
  [-3.82278, -38.56046],
  [-3.82250, -38.56018],
  [-3.82291, -38.55880],
  [-3.82325, -38.55770],
  [-3.82398, -38.55529],
  [-3.82383, -38.55526],
  [-3.82363, -38.55515],
  [-3.82345, -38.55502],
  [-3.82325, -38.55480],
  [-3.82289, -38.55413],
  [-3.82277, -38.55396],
  [-3.82267, -38.55374],
  [-3.82256, -38.55346],
  [-3.82231, -38.55322],
  [-3.82214, -38.55308],
  [-3.82173, -38.55285],
  [-3.82089, -38.55228],
  [-3.82058, -38.55199],
  [-3.82028, -38.55171],
  [-3.82000, -38.55127],
  [-3.81979, -38.55086],
  [-3.81963, -38.55049],
  [-3.81958, -38.55029],
  [-3.81959, -38.55005],
  [-3.81969, -38.54980],
  [-3.81981, -38.54944],
  [-3.81982, -38.54905],
  [-3.81981, -38.54876],
  [-3.81980, -38.54837],
  [-3.81984, -38.54805],
  [-3.81993, -38.54747],
  [-3.81993, -38.54703],
  [-3.81990, -38.54667],
  [-3.81984, -38.54621],
  [-3.81970, -38.54556],
  [-3.81960, -38.54520],
  [-3.81950, -38.54493],
  [-3.81944, -38.54474],
  [-3.81932, -38.54388],
  [-3.82149, -38.54135],
  [-3.82002, -38.53993],
  [-3.82166, -38.53631],
  [-3.82121, -38.53657],
  [-3.82077, -38.53647],
  [-3.81978, -38.53597],
  [-3.81860, -38.53531],
  [-3.81752, -38.53421],
  [-3.81712, -38.53336],
  [-3.81627, -38.53261],
  [-3.81616, -38.53187],
  [-3.81351, -38.53000],
  [-3.81224, -38.52881],
  [-3.81142, -38.52817],
  [-3.80885, -38.52631],
  [-3.80926, -38.52528],
  [-3.80789, -38.52425],
  [-3.80778, -38.52427],
  [-3.80710, -38.52443],
  [-3.80670, -38.52433],
  [-3.80634, -38.52406],
  [-3.80383, -38.52201],
  [-3.80358, -38.52231],
  [-3.80072, -38.52014],
  [-3.79967, -38.52015],
  [-3.79905, -38.52019],
  [-3.79877, -38.52020],
  [-3.79496, -38.51943],
  [-3.79449, -38.51966]
];

var horizonteCoords = [

  [-4.0895630075303, -38.5162653892636],
  [-4.0896316647782, -38.5160051729813],
  [-4.08931812233538, -38.5085705376589],
  [-4.08918024641411, -38.5067403027807],
  [-4.08879723179339, -38.5019442893492],
  [-4.08834719296106, -38.4969313978255],
  [-4.08638625006525, -38.4849885243054],
  [-4.08579972631903, -38.4847586948812],
  [-4.08608952229378, -38.4835870913117],
  [-4.08595759905055, -38.4826667474639],
  [-4.08661149997303, -38.4813729576989],
  [-4.08676977878672, -38.4807055229631],
  [-4.0876495870752, -38.4784583057207],
  [-4.087907679387, -38.4764845565816],
  [-4.08776930291459, -38.4749555369031],
  [-4.08760058588884, -38.4701989609107],
  [-4.08753202954088, -38.461568589361],
  [-4.08676198793425, -38.4618684066138],
  [-4.08663642566696, -38.4613912883394],
  [-4.08870874408052, -38.4604908799866],
  [-4.08899274671393, -38.4618476575986],
  [-4.09132401223332, -38.4618894110961],
  [-4.09458293699597, -38.4634992500996],
  [-4.09542168965798, -38.4624713501792],
  [-4.09593059447228, -38.462354976854],
  [-4.09591143511517, -38.4620586503518],
  [-4.09566162275772, -38.4609237272544],
  [-4.09571157610563, -38.4606781384868],
  [-4.0963864632377, -38.4596603229984],
  [-4.09655181238975, -38.4595102851295],
  [-4.09674337464563, -38.4594040153936],
  [-4.09694889810619, -38.4593640370606],
  [-4.09728329578399, -38.4591842921807],
  [-4.09748496960815, -38.459345890492],
  [-4.09804729405353, -38.4612521193762],
  [-4.10088056963743, -38.4618696615082],
  [-4.10210535074971, -38.4617791974396],
  [-4.10195474560626, -38.4579418946556],
  [-4.10202548157136, -38.4578172418079],
  [-4.10214913011962, -38.456882433561],
  [-4.10248957518062, -38.4555826494907],
  [-4.10189125530151, -38.4555151797494],
  [-4.10072420408746, -38.4553677236282],
  [-4.0984700067106, -38.4550519708293],
  [-4.09654247847122, -38.4540137783649],
  [-4.09664825401756, -38.4538332497917],
  [-4.0985716393803, -38.4547512622227],
  [-4.09912606789014, -38.4547899986548],
  [-4.09933263446138, -38.4542200017014],
  [-4.10038118414733, -38.4531584486025],
  [-4.10080691138657, -38.4529946790318],
  [-4.10336835500164, -38.4533509289173],
  [-4.10386268556713, -38.453100893687],
  [-4.10466875099247, -38.4511720219876],
  [-4.10588400947721, -38.4495473987837],
  [-4.10607341077932, -38.4496892904233],
  [-4.10485297533474, -38.4512775458311],
  [-4.10401862487356, -38.4532118668222],
  [-4.10346665174996, -38.4535649299659],
  [-4.10332056045771, -38.4539572638123],
  [-4.10438322603368, -38.4543143404142],
  [-4.10433432560369, -38.4556140175028],
  [-4.10776800792701, -38.4562411010933],
  [-4.10910666638372, -38.4569562850893],
  [-4.11156728768718, -38.4570738908028],
  [-4.11949294122428, -38.4604932041372],
  [-4.1216873356333, -38.461689462526],
  [-4.13200627865706, -38.4645119768679],
  [-4.13171329812423, -38.467931203564],
  [-4.13793078385432, -38.4699609832403],
  [-4.13780097858951, -38.4717890146207],
  [-4.13870623212732, -38.4731198694439],
  [-4.13853736190184, -38.477575486414],
  [-4.1383978555883, -38.4801908746403],
  [-4.13930386622238, -38.4798619049859],
  [-4.14024349230523, -38.4841682132634],
  [-4.1403155630211, -38.486278339061],
  [-4.13957750514345, -38.4931193446509],
  [-4.13619460794428, -38.4962570786009],
  [-4.13822543774299, -38.4968713604207],
  [-4.13978519824371, -38.4980892147225],
  [-4.13989261216909, -38.4981707058393],
  [-4.14002841107914, -38.4980055051459],
  [-4.14028187729564, -38.4981479883216],
  [-4.14048858222273, -38.4977625717764],
  [-4.14057164910829, -38.4978150733389],
  [-4.13971425107261, -38.4992798933138],
  [-4.14032917023926, -38.4998177579244],
  [-4.14026713822267, -38.4998895913796],
  [-4.13832065423668, -38.4983587709701],
  [-4.13761465922054, -38.4991526649219],
  [-4.13894273295875, -38.4998258672054],
  [-4.13886898412721, -38.4999801679531],
  [-4.13457440682507, -38.4977823663769],
  [-4.13376304250723, -38.4984555594855],
  [-4.13330744580564, -38.5005088283642],
  [-4.13945634768022, -38.5043669252011],
  [-4.13854476480821, -38.5083468526304],
  [-4.13585015200941, -38.5112061814571],
  [-4.13665574574968, -38.5115343522771],
  [-4.13660051167062, -38.5116724862221],
  [-4.13618251285976, -38.5127553378206],
  [-4.13524325317129, -38.5124539144888],
  [-4.13408311180172, -38.515900663403],
  [-4.13143692796733, -38.5144509252394],
  [-4.1298577131142, -38.5135033160238],
  [-4.13174840010142, -38.5098241357159],
  [-4.12508249221348, -38.5073691391857],
  [-4.1253862464735, -38.5091611141151],
  [-4.12510187471977, -38.509193796958],
  [-4.12497527440765, -38.508438765844],
  [-4.12409273094807, -38.5085855419935],
  [-4.12402793371765, -38.5071293730409],
  [-4.12369062767864, -38.5074657181153],
  [-4.12351680505392, -38.5072894858206],
  [-4.12452402879507, -38.5063906631065],
  [-4.11808365481109, -38.5051720222195],
  [-4.10928553885406, -38.5003754727541],
  [-4.10832177209987, -38.5005639639543],
  [-4.11145342001311, -38.5161779616641],
  [-4.11023328198225, -38.5166739921162],
  [-4.10859604562305, -38.5107162352343],
  [-4.10724944921271, -38.5111262290156],
  [-4.10704309264426, -38.5100391277824],
  [-4.10586808949557, -38.5103009094382],
  [-4.10481338184341, -38.5028987078597],
  [-4.10042032810933, -38.5034351151664],
  [-4.1020991356881, -38.5150792199407],
  [-4.09887629664555, -38.5145996903453],
  [-4.09947258447134, -38.5187603027096],
  [-4.09634289996998, -38.519593609041],
  [-4.0961953281838, -38.5186321425548],
  [-4.09510517005496, -38.5187890333367],
  [-4.09498851181356, -38.5178380791071],
  [-4.09428792261571, -38.5177967149693],
  [-4.0895630075303, -38.5162653892636],
    [-4.05433281349475, -38.478350792446],
  [-4.06044287492121, -38.4799541566217],
  [-4.06114038056717, -38.4737696306475],
  [-4.06140686752834, -38.4721580100677],
  [-4.06504507483008, -38.4655835756153],
  [-4.06520238390949, -38.4604148212765],
  [-4.06826098776963, -38.4539196192395],
  [-4.06874857946224, -38.4541347137449],
  [-4.06624455560118, -38.4594704576487],
  [-4.0741518565652, -38.4595123627808],
  [-4.07455948553152, -38.4596664176701],
  [-4.07463208401643, -38.4567319725595],
  [-4.08289561041223, -38.4608896687798],
  [-4.08502893266114, -38.461882761039],
  [-4.08663642566696, -38.4613912883394],
  [-4.08676198793425, -38.4618684066138],
  [-4.08753202954088, -38.461568589361],
  [-4.08760058588884, -38.4701989609107],
  [-4.08776930291459, -38.4749555369031],
  [-4.087907679387, -38.4764845565816],
  [-4.0876495870752, -38.4784583057207],
  [-4.08676977878672, -38.4807055229631],
  [-4.08661149997303, -38.4813729576989],
  [-4.08595759905055, -38.4826667474639],
  [-4.08608952229378, -38.4835870913117],
  [-4.08579972631903, -38.4847586948812],
  [-4.08638625006525, -38.4849885243054],
  [-4.08834719296106, -38.4969313978255],
  [-4.08879723179339, -38.5019442893492],
  [-4.08931812233538, -38.5085705376589],
  [-4.0896316647782, -38.5160051729813],
  [-4.08888205695239, -38.5157564839734],
  [-4.08845339131373, -38.5157158622408],
  [-4.07910020364062, -38.5144056833335],
  [-4.07693271738324, -38.5139485646533],
  [-4.07681947600252, -38.5139352721753],
  [-4.07679836083663, -38.5141389117132],
  [-4.07456755284961, -38.513863118991],
  [-4.06814016749349, -38.5149974735823],
  [-4.06725119958387, -38.5148350986217],
  [-4.06570545645358, -38.5142564144462],
  [-4.06497381595273, -38.5157923754759],
  [-4.06468514011078, -38.515661765637],
  [-4.0627890891014, -38.5149104187118],
  [-4.06230990079558, -38.5174997404063],
  [-4.06073664011516, -38.5164558894148],
  [-4.06079375114008, -38.514902533915],
  [-4.06150051798433, -38.5085444705712],
  [-4.05991111856309, -38.5041750696961],
  [-4.0610358632426, -38.5009862328419],
  [-4.05947094156674, -38.491983182018],
  [-4.06021047985179, -38.4831328495253],
  [-4.05401801954204, -38.4815412404638],
  [-4.05433281349475, -38.478350792446]
];

// Adiciona o polígono ao mapa
var fortalezaPolygon = L.polygon(fortalezaCoords, {color: 'blue'}).addTo(map);
fortalezaPolygon.on('mouseover', function (e) {
fortalezaPolygon.getElement().classList.add('white-border');
});
fortalezaPolygon.on('mouseout', function (e) {
fortalezaPolygon.getElement().classList.remove('white-border');
});


var horizontePolygon = L.polygon(horizonteCoords, { color: 'green' }).addTo(map);
horizontePolygon.on('mouseover', function (e) {
  horizontePolygon.getElement().classList.add('white-border');
});
horizontePolygon.on('mouseout', function (e) {
  horizontePolygon.getElement().classList.remove('white-border');
});

// Obtém o ponto central do retângulo que circunscreve o polígono
var fortalezaBounds = fortalezaPolygon.getBounds();
var fortalezaCenter = fortalezaBounds.getCenter();

var horizonteBounds = horizontePolygon.getBounds();
var horizonteCenter = horizonteBounds.getCenter();

// Adiciona o nome da cidade no centro do polígono
L.marker(fortalezaCenter, {
icon: L.divIcon({
  className: 'city-label',
  html: 'Fortaleza',
  iconSize: [100, 40],
})
}).addTo(map);

L.marker(horizonteCenter, {
  icon: L.divIcon({
    className: 'city-label',
    html: 'Horizonte',
    iconSize: [100, 40],
  })
  }).addTo(map);
  
